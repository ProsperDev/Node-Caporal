requirejs.config({
  //By default load any module IDs from js/lib
  baseUrl: "/assets/js",
  //except, if the module ID starts with "app",
  //load it from the js/app directory. paths
  //config is relative to the baseUrl, and
  //never includes a ".js" extension since
  //the paths config could be for a directory.
  // paths: {
  //   caporal: "/assets/js/caporal",
  // },
})

// require caporal manualy on load, because otherwise it will
// fail in subsequent JS code generated by the TS worker
// which uses a sync version of require()
require(["@caporal/core", "local-echo"], (caporal, ex) => {
  // BTW, declare it globally
  window.caporal = caporal
})

/*
 TS generates a `Object.defineProperty(exports, "__esModule", { value: true });`
 for module interop, which is breaking on web because `exports` is not defined,
 so let's define it here.
*/
window.exports = exports = {}
